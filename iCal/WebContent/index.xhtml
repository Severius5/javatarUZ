<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"> 

<h:head>
	<style>
		.ui-widget, .ui-widget .ui-widget {
			font-size: 90% !important;
		}	
		table {
   			border-collapse: collapse;
    		width: 100%;
		}th, td {
   			 padding: 8px;
   			 text-align: left;
   			 border-bottom: 1px solid #ddd;
		}tr:hover{background-color:#f5f5f5}
	</style>
</h:head> 
<h:body>
	<div id="addNew">
		<fieldset>
			<legend align="center">Generator iCal</legend>
			<p:commandButton id="newButton" value="Nowy Event" type="button" styleClass="ui-mini"/>
   			<p:overlayPanel id="newPanel" for="newButton" hideEffect="fade" dynamic="true" style="width:600px">
        		<h:form>
				Title: <h:inputText value="#{iCalBean.eventSample.eventTitle}" required="true" maxlength="32"/><br/>
				Every day: <h:selectBooleanCheckbox value="#{iCalBean.eventSample.everyDay}" required="true" /><br/>
				Date start: <p:calendar value="#{iCalBean.eventSample.dateStart}" pattern="dd/MM/yyyy HH:mm" /><br/>
				Date end: <p:calendar value="#{iCalBean.eventSample.dateEnd}" pattern="dd/MM/yyyy HH:mm" /><br/>
				Location: <h:inputText value="#{iCalBean.eventSample.location}" required="true" maxlength="32"/><br/>
				Description:
				<br/>
				<h:inputTextarea value="#{iCalBean.eventSample.description}" required="true" maxlength="150" style="height:200px;width:400px;"/><br/>
				
				<br/>
				<br/>
				<p:outputLabel for="datetime" value="Datetime:" />
       			<p:calendar id="datetime" value="#{iCalBean.date}" pattern="dd/MM/yyyy HH:mm" />
       			
				<h:commandButton action="#{iCalBean.addEvent}" value="Add event" />
			</h:form>
			</p:overlayPanel>
		</fieldset>
	</div>
	
	<div id="viewEvents">
		<fieldset>
			<legend align="center">Event List</legend>
			<h:form>
			<h:dataTable value="#{iCalBean.eventList}" var="event">
				<h:column>
        			<f:facet name="header">Title</f:facet>
    				<h:inputText value="#{event.eventTitle}" ize="10" rendered="#{event.editable}" />
    				<h:outputText value="#{event.eventTitle}" rendered="#{not event.editable}" />
    			</h:column>
    			<h:column>
      			  	<f:facet name="header">Every day</f:facet>
    				<h:selectBooleanCheckbox value="#{event.everyDay}" rendered="#{event.editable}" />
    				<h:outputText value="#{event.everyDay}" rendered="#{not event.editable}" />
    			</h:column>
    			<h:column>
        			<f:facet name="header">Date start</f:facet>
    				<h:outputText value="#{event.dateStart}" rendered="#{not event.editable}" >
						<f:convertDateTime pattern="dd.MM.yyyy HH:mm" timeZone="GMT+2"/>
					</h:outputText>
    				<p:calendar value="#{event.dateStart}" pattern="dd/MM/yyyy HH:mm" rendered="#{event.editable}"/>
    			</h:column>
    			<h:column>
      			  	<f:facet name="header">Date end</f:facet>
					<h:outputText value="#{event.dateEnd}" rendered="#{not event.editable}" >
						<f:convertDateTime pattern="dd.MM.yyyy HH:mm" timeZone="GMT+2"/>
					</h:outputText>
    				<p:calendar value="#{event.dateEnd}" pattern="dd/MM/yyyy HH:mm" rendered="#{event.editable}"/>
    			</h:column>
    			<h:column>
      			  	<f:facet name="header">Description</f:facet>
    				<h:inputText value="#{event.description}" rendered="#{event.editable}" />
    				<h:outputText value="#{event.description}" rendered="#{not event.editable}" />
    			</h:column>
    			<h:column>
       			 	<f:facet name="header">Location</f:facet>
    				<h:inputText value="#{event.location}" rendered="#{event.editable}" />
    				<h:outputText value="#{event.location}" rendered="#{not event.editable}" />
    			</h:column>
    			<h:column>
        			<f:facet name="header">Copy</f:facet>
    				<h:commandButton action="#{iCalBean.copyEvent(event)}" value="C" />
    			</h:column>
    			<h:column>
        			<f:facet name="header">Delete</f:facet>
    				<h:commandButton action="#{iCalBean.deleteEvent(event)}" value="D" />
    			</h:column>
    			<h:column>
        			<f:facet name="header">Edit</f:facet>
        			<h:commandButton action="#{iCalBean.saveEventEdit(event)}" value="Save" rendered="#{event.editable}"/>
    				<h:commandButton action="#{iCalBean.editEventEdit(event)}" value="Edit" rendered="#{not event.editable}"/>
    			</h:column>
			</h:dataTable>
			</h:form>
		</fieldset>
	</div>
</h:body> 
</html>
